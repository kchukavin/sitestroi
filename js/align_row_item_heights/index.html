<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Выравнивание высоты элементов</title>
	<link rel="stylesheet" href="style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>




<div class="catalog">
	<div class="catalog__item">
	<a href="#"  class="catalog__pic" data-id="130" >
		<img src="/userfls/shop/shop_middle/130_df-skincaine-gel-doktor-filler-105.jpg" alt="DF Skincaine gel (Доктор Филлер), 10,56%" title="DF Skincaine gel (Доктор Филлер), 10,56%">
									
	</a><form method="post" action="" class="catalog__form js_shop_form ajax" data-good_id="36">
		<input type="hidden" name="good_id" value="36">
	<input type="hidden" name="module" value="shop">
	<input type="hidden" name="action" value="">
									<div class="catalog__unit">
										<div class="catalog__info">
											<!--<div class="catalog__title"></div>-->
											<a href="http://obezbol.noviho.beget.tech/shop/katalog/df-skincaine-gel-doktor-filler-1056/" class="catalog__name">DF Skincaine gel (Доктор Филлер), 10,56%</a><div class="catalog__txt"><p>Охлаждающий гель, предназначенный для применения перед косметологическими процедурами.</p>
	<p>Подойдет для:</p>
	<p><b>Доставка</b> по Москве и РФ</p></div>
										</div><div class="js_shop_param_price shop_param_price catalog__prices shop-item-price"><div class="catalog__lastp">Старая цена: <s>1&nbsp;000 Р</s></div><div class="catalog__price"><span class="js_shop_price" summ="900" format_price_1="" format_price_2="" format_price_3=" ">900</span> Р</div></div><div class="addict-field"><div class="js_shop_form_param shop_form_param"></div></div></div><div class="js_shop_buy catalog__ui"><div class="count-box">
											<input type="text" value="1" name="count" class="number" pattern="[0-9]+([\.|,][0-9]+)?" step="any">
											<div class="count-plus"><i class="fa fa-plus-square"></i></div>
											<div class="count-minus"><i class="fa fa-minus-square"></i></div>
										</div><span class="btn btn_bay" action="buy">КУПИТЬ</span><div class="error" style="display:none;"></div></div></form>
	</div>

	<div class="catalog__item">
	<a href="#"  class="catalog__pic" data-id="130" >
		<img src="/userfls/shop/shop_middle/130_df-skincaine-gel-doktor-filler-105.jpg" alt="DF Skincaine gel (Доктор Филлер), 10,56%" title="DF Skincaine gel (Доктор Филлер), 10,56%">
									
	</a><form method="post" action="" class="catalog__form js_shop_form ajax" data-good_id="36">
		<input type="hidden" name="good_id" value="36">
	<input type="hidden" name="module" value="shop">
	<input type="hidden" name="action" value="">
									<div class="catalog__unit">
										<div class="catalog__info">
											<!--<div class="catalog__title"></div>-->
											<a href="http://obezbol.noviho.beget.tech/shop/katalog/df-skincaine-gel-doktor-filler-1056/" class="catalog__name">DF Skincaine gel (Доктор Филлер), 10,56%</a><div class="catalog__txt"><p>Охлаждающий гель, предназначенный для применения перед косметологическими процедурами.</p>
	<p>Подойдет для:</p>
	<p><b>Доставка</b> по Москве и РФ</p></div>
										</div><div class="js_shop_param_price shop_param_price catalog__prices shop-item-price"><div class="catalog__lastp">Старая цена: <s>1&nbsp;000 Р</s></div><div class="catalog__price"><span class="js_shop_price" summ="900" format_price_1="" format_price_2="" format_price_3=" ">900</span> Р</div></div><div class="addict-field"><div class="js_shop_form_param shop_form_param"></div></div></div><div class="js_shop_buy catalog__ui"><div class="count-box">
											<input type="text" value="1" name="count" class="number" pattern="[0-9]+([\.|,][0-9]+)?" step="any">
											<div class="count-plus"><i class="fa fa-plus-square"></i></div>
											<div class="count-minus"><i class="fa fa-minus-square"></i></div>
										</div><span class="btn btn_bay" action="buy">КУПИТЬ</span><div class="error" style="display:none;"></div></div></form>
	</div>
	
</div>


	<div class="catalog__item">
	<a href="#"  class="catalog__pic" data-id="130" >
		<img src="/userfls/shop/shop_middle/130_df-skincaine-gel-doktor-filler-105.jpg" alt="DF Skincaine gel (Доктор Филлер), 10,56%" title="DF Skincaine gel (Доктор Филлер), 10,56%">
									
	</a><form method="post" action="" class="catalog__form js_shop_form ajax" data-good_id="36">
		<input type="hidden" name="good_id" value="36">
	<input type="hidden" name="module" value="shop">
	<input type="hidden" name="action" value="">
									<div class="catalog__unit">
										<div class="catalog__info">
											<!--<div class="catalog__title"></div>-->
											<a href="http://obezbol.noviho.beget.tech/shop/katalog/df-skincaine-gel-doktor-filler-1056/" class="catalog__name">DF Skincaine gel (Доктор Филлер), 10,56%</a><div class="catalog__txt"><p>Охлаждающий гель, предназначенный для применения перед косметологическими процедурами.</p>
	<p>Подойдет для:</p>
	<p><b>Доставка</b> по Москве и РФ</p></div>
										</div><div class="js_shop_param_price shop_param_price catalog__prices shop-item-price"><div class="catalog__lastp">Старая цена: <s>1&nbsp;000 Р</s></div><div class="catalog__price"><span class="js_shop_price" summ="900" format_price_1="" format_price_2="" format_price_3=" ">900</span> Р</div></div><div class="addict-field"><div class="js_shop_form_param shop_form_param"></div></div></div><div class="js_shop_buy catalog__ui"><div class="count-box">
											<input type="text" value="1" name="count" class="number" pattern="[0-9]+([\.|,][0-9]+)?" step="any">
											<div class="count-plus"><i class="fa fa-plus-square"></i></div>
											<div class="count-minus"><i class="fa fa-minus-square"></i></div>
										</div><span class="btn btn_bay" action="buy">КУПИТЬ</span><div class="error" style="display:none;"></div></div></form>
	</div>

	<div class="catalog__item">
	<a href="#"  class="catalog__pic" data-id="130" >
		<img src="/userfls/shop/shop_middle/130_df-skincaine-gel-doktor-filler-105.jpg" alt="DF Skincaine gel (Доктор Филлер), 10,56%" title="DF Skincaine gel (Доктор Филлер), 10,56%">
									
	</a><form method="post" action="" class="catalog__form js_shop_form ajax" data-good_id="36">
		<input type="hidden" name="good_id" value="36">
	<input type="hidden" name="module" value="shop">
	<input type="hidden" name="action" value="">
									<div class="catalog__unit">
										<div class="catalog__info">
											<!--<div class="catalog__title"></div>-->
											<a href="http://obezbol.noviho.beget.tech/shop/katalog/df-skincaine-gel-doktor-filler-1056/" class="catalog__name">DF Skincaine gel (Доктор Филлер), 10,56%</a><div class="catalog__txt"><p>Охлаждающий гель, предназначенный для применения перед косметологическими процедурами.</p>
	<p>Подойдет для:</p>
	<p><b>Доставка</b> по Москве и РФ</p></div>
										</div><div class="js_shop_param_price shop_param_price catalog__prices shop-item-price"><div class="catalog__lastp">Старая цена: <s>1&nbsp;000 Р</s></div><div class="catalog__price"><span class="js_shop_price" summ="900" format_price_1="" format_price_2="" format_price_3=" ">900</span> Р</div></div><div class="addict-field"><div class="js_shop_form_param shop_form_param"></div></div></div><div class="js_shop_buy catalog__ui"><div class="count-box">
											<input type="text" value="1" name="count" class="number" pattern="[0-9]+([\.|,][0-9]+)?" step="any">
											<div class="count-plus"><i class="fa fa-plus-square"></i></div>
											<div class="count-minus"><i class="fa fa-minus-square"></i></div>
										</div><span class="btn btn_bay" action="buy">КУПИТЬ</span><div class="error" style="display:none;"></div></div></form>
	</div>


<script>

$(function() {
	recalcCatalogItemHeights();
});


$(window).resize(function() {
	recalcCatalogItemHeights();
});

function setHeights(elements, height) {
	for (var i in elements) {
		$(elements[i]).height(height);
	}
}

function recalcCatalogItemHeights() {
	
	var items = $('.catalog__item .catalog__unit').get();


	var prevTop = 0;
	var maxRowHeight = 0;
	var rowItems = [];

	while (items.length > 0) {
		var item = items.shift();

		var itemTop = $(item).parents('.catalog__item').offset().top;
		var itemHeight = $(item).height();

		if (itemTop !== prevTop) { // row end
			setHeights(rowItems, maxRowHeight);
			maxRowHeight = 0;
			rowItems = [];
			prevTop = itemTop;
		}
		rowItems.push(item);

		if (itemHeight > maxRowHeight) maxRowHeight = itemHeight;
	}
	if (rowItems.length) setHeights(rowItems, maxRowHeight);
}
</script>

</body>
</html>




